<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculador de Arco - Siemens 3NA1 200A</title>
    <style>
        :root { --primary: #005eb8; --accent: #e67e22; --danger: #c0392b; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); padding: 20px; display: flex; justify-content: center; }
        .container { background: white; max-width: 650px; width: 100%; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        h1 { text-align: center; color: var(--primary); font-size: 1.5rem; border-bottom: 3px solid var(--primary); padding-bottom: 10px; }
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .input-group { display: flex; flex-direction: column; }
        label { font-size: 0.85rem; font-weight: bold; margin-bottom: 5px; }
        input { padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        button { width: 100%; padding: 15px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 20px; background: var(--primary); color: white; }
        #result-arc { margin-top: 20px; padding: 20px; background: #f9f9f9; border-radius: 10px; text-align: center; border: 2px solid #eee; display: none; }
        .energy-val { font-size: 2.2rem; font-weight: bold; color: var(--danger); }
        .badge { display: inline-block; padding: 8px 20px; border-radius: 20px; color: white; font-weight: bold; margin: 10px 0; }
        .info-text { font-size: 0.9rem; color: #666; margin-top: 10px; }
    </style>
</head>
<body>
 
<div class="container">
    <h1>Cálculo de Arco: Siemens 3NA1 (200A)</h1>
    <div class="input-grid">
        <div class="input-group">
            <label>I Cortocircuito Bolted (kA)</label>
            <input type="number" id="ka_bolted" placeholder="Ej: 20">
        </div>
        <div class="input-group">
            <label>Distancia Trabajo (mm)</label>
            <input type="number" id="dist" value="455">
        </div>
    </div>
    
    <button onclick="calculateArc()">Calcular Energía de Incidente</button>
    
    <div id="result-arc">
        <div class="info-text">Corriente de Arco Estimada: <span id="ia-val"></span> kA</div>
        <div class="info-text">Tiempo de Despeje (Curva gL/gG): <span id="t-val"></span> seg</div>
        <hr>
        <div class="energy-val" id="energy-res">0.00 cal/cm²</div>
        <div id="cat-badge" class="badge"></div>
        <p id="boundary-res" style="font-weight:bold;"></p>
    </div>
</div>
 
<script>
    function getFuseTime(Ia_kA) {
        const Amps = Ia_kA * 1000;
        // Lógica basada en la curva característica del Siemens 3NA1 200A
        if (Amps < 350) return 1000; // No dispara o muy lento
        if (Amps < 500) return 100;
        if (Amps < 800) return 5;
        if (Amps < 1200) return 0.8;
        if (Amps < 2000) return 0.15;
        if (Amps < 3500) return 0.04;
        return 0.01; // Cortocircuito franco (>3.5kA)
    }
 
    function calculateArc() {
        const Ibf = parseFloat(document.getElementById('ka_bolted').value);
        const D = parseFloat(document.getElementById('dist').value);
 
        if (!Ibf || !D) return alert("Ingrese los datos necesarios.");
 
        // 1. Corriente de Arco (Ia) aproximada IEEE 1584 para <1kV en aire
        // Ia = 10^(0.00402 + 0.983 * log10(Ibf))
        let Ia = Math.pow(10, (0.00402 + 0.983 * Math.log10(Ibf)));
        
        // 2. Tiempo de despeje automático según curva del fusible
        let T = getFuseTime(Ia);
 
        // 3. Energía Incidente (E) - Ecuación de Lee (Baja Tensión)
        // E = 5.12 * 10^5 * V * Ibf * T / D^2 (Aprox simplificada cal/cm2)
        // Para 500V (según tu fusible):
        let energy = (0.123 * Ia * T * (610**2 / D**2));
 
        // 4. Frontera de protección (Flash Protection Boundary)
        let boundary = Math.sqrt(2.


