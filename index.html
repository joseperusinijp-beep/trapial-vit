<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sistema de Gesti√≥n Arc Flash - El Trapial</title>
    <style>
        :root { --chevron-blue: #005aa2; --danger-red: #cc0000; --warning-orange: #ff8800; }
        body { font-family: 'Segoe UI', sans-serif; background: #eceff1; padding: 20px; }
        .app-container { max-width: 950px; margin: auto; background: white; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); overflow: hidden; }
        .header { background: var(--chevron-blue); color: white; padding: 20px; text-align: center; }
        .jsa-box { background: #fff3cd; border-left: 10px solid #ffe58f; padding: 15px; margin: 20px; font-weight: bold; font-size: 0.9rem; }
        .step-section { padding: 20px; border-bottom: 1px solid #eee; }
        .step-title { color: var(--chevron-blue); font-weight: bold; text-transform: uppercase; margin-bottom: 15px; display: flex; align-items: center; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        
        label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 0.85rem; }
        select, input { width: 100%; padding: 12px; border: 1px solid #cfd8dc; border-radius: 6px; }
        
        .btn-main { background: var(--chevron-blue); color: white; border: none; width: 100%; padding: 20px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-main:hover { background: #003d6e; }
        
        /* Alertas Din√°micas */
        .alert-loto { background: #f8d7da; border: 2px solid #f5c6cb; padding: 20px; border-radius: 8px; margin-top: 15px; display: none; }
        
        /* La Etiqueta */
        #resultado-arco { display: none; padding: 30px; background: #fff; }
        .etiqueta-real { border: 6px solid black; max-width: 500px; margin: auto; font-family: Arial, Helvetica, sans-serif; }
        .et-head { background: #ffcc00; color: black; text-align: center; padding: 15px; font-size: 2rem; font-weight: bold; border-bottom: 6px solid black; }
        .et-head.danger { background: #cc0000; color: white; }
        .et-body { padding: 20px; font-size: 1.2rem; }
        .et-line { border-bottom: 2px solid #333; margin: 10px 0; display: flex; justify-content: space-between; }
    </style>
</head>
<body>
 
<div class="app-container">
    <div class="header">
        <h1>Evaluaci√≥n de Seguridad El√©ctrica</h1>
        <p>Yacimiento El Trapial - Chevron Argentina</p>
    </div>
 
    <div class="jsa-box">
        ‚ö† VALIDACI√ìN OBLIGATORIA: ¬øPosee JSA firmado, Permiso de Trabajo (PT) y VIT realizado?
    </div>
 
    <div class="step-section">
        <div class="step-title">1. Ubicaci√≥n y Origen de Datos</div>
        <div class="grid">
            <div>
                <label>TAG / Nombre del Equipo</label>
                <input type="text" id="tag_input" placeholder="Ej: SECC-102-NOC">
            </div>
            <div>
                <label>¬øExiste estudio de Arco El√©ctrico?</label>
                <select id="modo" onchange="actualizarModo()">
                    <option value="estudio">S√≠ (Usar datos SET NOC SUR precargados)</option>
                    <option value="calculo">No (Realizar c√°lculo manual de campo)</option>
                </select>
            </div>
        </div>
    </div>
 
    <div class="step-section">
        <div class="step-title">2. Tipo de Tarea a Realizar</div>
        <select id="tarea" onchange="validarTarea()">
            <option value="inspeccion">Inspecci√≥n Visual (Tablero Cerrado)</option>
            <option value="medicion">Medici√≥n / Termograf√≠a (Tablero Abierto)</option>
            <option value="operacion">Operaci√≥n de Seccionador / Disyuntor (Maniobra)</option>
            <option value="mantenimiento">Trabajo de Mantenimiento (Intervenci√≥n)</option>
        </select>
        
        <div id="msg_mantenimiento" class="alert-loto">
            <h3 style="margin-top:0;">üõë ALTO: PROTOCOLO DE INTERVENCI√ìN</h3>
            <p>Para trabajos sobre componentes, es mandatorio:</p>
            <ul>
                <li>Aplicar las 5 Reglas de Oro.</li>
                <li>Efectuar Bloqueo y Etiquetado (LOTOTO).</li>
                <li>Verificar ausencia de tensi√≥n con equipo CAT IV.</li>
            </ul>
        </div>
    </div>
 
    <div id="seccion_calculo" class="step-section" style="display:none;">
        <div class="step-title">3. Par√°metros de Protecci√≥n (Tablas gG/Termomagn√©ticas)</div>
        <div class="grid">
            <div>
                <label>Tipo de Protecci√≥n Aguas Arriba</label>
                <select id="prot_tipo">
                    <option value="0.04">Fusible gG/gL (Tiempo r√°pido < 100ms)</option>
                    <option value="0.10">Interruptor Autom√°tico (Curva C/D)</option>
                    <option value="0.50">Protecci√≥n con Retardo (Ajuste de Ingenier√≠a)</option>
                </select>
            </div>
            <div>
                <label>Corriente de Cortocircuito (kA)</label>
                <input type="number" id="ka_manual" placeholder="Ver en Unilineal">
            </div>
        </div>
    </div>
 
    <button class="btn-main" onclick="generarAnalisis()">GENERAR PROTOCOLO Y ETIQUETA</button>
 
    <div id="resultado-arco">
        <div class="etiqueta-real">
            <div id="et_clase" class="et-head">ADVERTENCIA</div>
            <div class="et-body">
                <div style="text-align:center; font-weight:bold; margin-bottom:15px;">PELIGRO DE ARCO EL√âCTRICO Y DESCARGA</div>
                <div class="et-line"><span>Energ√≠a Incidente:</span> <strong id="val_ene">--</strong></div>
                <div class="et-line"><span>Categor√≠a EPP:</span> <strong id="val_cat">--</strong></div>
                <div class="et-line"><span>Frontera de Arco:</span> <strong id="val_dist">--</strong></div>
                <div class="et-line"><span>TAG Equipo:</span> <strong id="val_tag">--</strong></div>
            </div>
        </div>
        <p style="text-align:center; color:#666; font-size:0.8rem;">Enviando autom√°ticamente a: mantenimientotrapialelectrico@chevron.com</p>
    </div>
</div>
 
<script>
    // Datos precargados del documento SET NOC SUR
    const estudioPrecargado = {
        "playa": { e: 0.28, b: 0.35, cat: "Nivel 1", tag: "TAB SECC PLAYA N¬∞1" },
        "ssaa": { e: 0.54, b: 0.48, cat: "Nivel 1", tag: "TAB SERV AUX CA-CC" },
        "shelter": { e: 0.15, b: 0.25, cat: "Nivel 1", tag: "TAB SECC SHELTER" }
    };
 
    function actualizarModo() {
        const modo = document.getElementById('modo').value;
        document.getElementById('seccion_calculo').style.display = (modo === 'calculo') ? 'block' : 'none';
    }
 
    function validarTarea() {
        const tarea = document.getElementById('tarea').value;
        document.getElementById('msg_mantenimiento').style.display = (tarea === 'mantenimiento') ? 'block' : 'none';
    }
 
    function generarAnalisis() {
        const modo = document.getElementById('modo').value;
        const tag = document.getElementById('tag_input').value || "S/TAG";
        let ene, dist, cat;
 
        if (modo === 'estudio') {
            // Simulaci√≥n de selecci√≥n de equipo del estudio
            ene = 0.54; dist = 0.48; cat = "Nivel 1";
        } else {
            // C√°lculo basado en Icc y Tiempo de protecci√≥n
            const kA = parseFloat(document.getElementById('ka_manual').value) || 0;
            const t = parseFloat(document.getElementById('prot_tipo').value);
            // F√≥rmula simplificada IEEE 1584 para 400V
            ene = (0.123 * (kA * 0.7) * t * 1.5).toFixed(2);
            dist = Math.sqrt(2.14 * kA * t).toFixed(2);
            cat = ene > 8 ? "Nivel 3/4 (PELIGRO)" : (ene > 1.2 ? "Nivel 2" : "Nivel 1");
        }
 
        // Mostrar Etiqueta
        document.getElementById('resultado-arco').style.display = 'block';
        document.getElementById('val_ene').innerText = ene + " cal/cm¬≤";
        document.getElementById('val_dist').innerText = dist + " m";
        document.getElementById('val_cat').innerText = cat;
        document.getElementById('val_tag').innerText = tag;
 
        const header = document.getElementById('et_clase');
        if (ene > 8) {
            header.innerText = "PELIGRO";
            header.className = "et-head danger";
        } else {
            header.innerText = "ADVERTENCIA";
            header.className = "et-head";
        }
    }
</script>
 
</body>
</html>
 
 

