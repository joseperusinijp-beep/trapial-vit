<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Arc Flash El Trapial - SWA & LOTO System</title>
    <style>
        :root { --chevron-blue: #005aa2; --danger-red: #cc0000; --warning-gold: #ffcc00; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f4f4f9; padding: 10px; }
        .container { max-width: 850px; margin: auto; background: white; border-radius: 12px; box-shadow: 0 4px 25px rgba(0,0,0,0.2); overflow: hidden; }
        .header { background: var(--chevron-blue); color: white; padding: 15px; text-align: center; }
        .section { padding: 20px; border-bottom: 1px solid #eee; }
        label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 0.95rem; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-size: 1rem; }
 
        /* CARTEL SWA DIN√ÅMICO */
        .swa-box { background: var(--danger-red); color: white; padding: 25px; border-radius: 10px; margin: 20px; display: none; text-align: center; border: 5px solid #4a0000; }
        .swa-box h2 { margin: 0 0 10px 0; font-size: 2.5rem; font-weight: 900; letter-spacing: -1px; }
        .swa-box p { font-size: 1.3rem; margin-bottom: 15px; font-weight: bold; }
        .swa-list { text-align: left; display: inline-block; font-size: 1.1rem; }
 
        .btn-main { background: var(--chevron-blue); color: white; border: none; width: 100%; padding: 22px; font-size: 1.4rem; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-main:hover { background: #003d6e; }
 
        /* ETIQUETA SEG√öN NFPA 70E 2024 */
        #result-display { display: none; padding: 20px; animation: fadeIn 0.5s; }
        .etiqueta-af { border: 8px solid black; background: white; width: 100%; max-width: 650px; margin: auto; }
        .et-head { padding: 20px; text-align: center; font-size: 3rem; font-weight: 900; border-bottom: 8px solid black; }
        .warning { background: var(--warning-gold); color: black; }
        .danger { background: var(--danger-red); color: white; }
        .et-body { padding: 25px; }
        
        /* CATEGOR√çA GIGANTE */
        .et-cat-box { text-align: center; border: 5px solid black; margin: 20px 0; padding: 20px; background: #f8f8f8; }
        .et-cat-label { font-size: 1.5rem; font-weight: bold; display: block; text-transform: uppercase; }
        .et-cat-value { font-size: 5rem; font-weight: 1000; display: block; line-height: 1; color: #000; }
        
        .et-row { display: flex; justify-content: space-between; font-size: 1.4rem; border-bottom: 2px solid #ddd; padding: 10px 0; }
        .epp-detail-box { background: #fffbe6; padding: 20px; font-size: 1.1rem; margin-top: 20px; border: 2px solid #ffe58f; border-left: 10px solid #ffcc00; }
 
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @media print { .btn-main, .section, .header, .swa-box { display: none !important; } .container { box-shadow: none; border: none; } }
    </style>
</head>
<body>
 
<div class="container">
    <div class="header">
        <h1>Evaluaci√≥n de Riesgo Arco El√©ctrico</h1>
        <p>Chevron Argentina - Planta El Trapial</p>
    </div>
 
    <div class="section">
        <label>TAG / Nombre del Equipo (Ver placa o unilineal)</label>
        <input type="text" id="tag_input" placeholder="Ej: TAB-NOC-PLAYA-01">
 
        <label>¬øQu√© tarea va a realizar el operario?</label>
        <select id="tarea" onchange="verificarSWA()">
            <option value="inspeccion">Inspecci√≥n Visual (Tablero Cerrado)</option>
            <option value="medicion">Medici√≥n o Termograf√≠a (Puerta Abierta)</option>
            <option value="maniobra">Operaci√≥n de Seccionador / Disyuntor</option>
            <option value="intervencion">Intervenci√≥n / Cambio de Componentes</option>
        </select>
    </div>
 
    <div id="swa_alert" class="swa-box">
        <h2>SWA - DETENGA LA TAREA</h2>
        <p>NO EST√Å PERMITIDO INTERVENIR ENERGIZADO</p>
        <div class="swa-list">
            ‚Ä¢ Aplicar las <strong>5 REGLAS DE ORO</strong> obligatoriamente.<br>
            ‚Ä¢ Ejecutar Bloqueo y Etiquetado <strong>(LOTOTO)</strong>.<br>
            ‚Ä¢ Leer y firmar JSA / Paquete de Trabajo / VIT.<br>
            ‚Ä¢ Verificar ausencia de tensi√≥n con equipo CAT IV.
        </div>
    </div>
 
    <div class="section" id="params">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <label>Protecci√≥n (Tiempos de Despeje)</label>
                <select id="prot_t">
                    <option value="0.04">Fusible gG/gL (Tiempo R√°pido)</option>
                    <option value="0.10">Interruptor Autom√°tico (Est√°ndar)</option>
                    <option value="0.40">Protecci√≥n con Retardo (Ajuste Ing.)</option>
                </select>
            </div>
            <div>
                <label>Corriente Corto Barra (kA)</label>
                <input type="number" id="ka_val" placeholder="Ej: 25">
            </div>
        </div>
    </div>
 
    <button class="btn-main" onclick="generarEtiqueta()">GENERAR ETIQUETA Y EVALUAR EPP</button>
 
    <div id="result-display">
        <div class="etiqueta-af">
            <div id="et_header" class="et-head warning">ADVERTENCIA</div>
            <div class="et-body">
                <div style="text-align:center; font-weight:900; font-size:1.6rem; color:#000;">PELIGRO DE ARCO EL√âCTRICO Y DESCARGA</div>
                
                <div class="et-cat-box">
                    <span class="et-cat-label">CATEGOR√çA DE EPP REQUERIDO</span>
                    <span id="res_cat" class="et-cat-value">--</span>
                </div>
 
                <div class="et-row"><span>Energ√≠a Incidente:</span> <strong id="res_ene">--</strong></div>
                <div class="et-row"><span>Frontera de Arco:</span> <strong id="res_dist">--</strong></div>
                <div class="et-row"><span>TAG del Equipo:</span> <strong id="res_tag">--</strong></div>
 
                <div id="epp_lista" class="epp-detail-box"></div>
            </div>
        </div>
        <div style="text-align:center; margin-top:20px;">
            <button class="btn-main" style="background:#ed7d31; width:auto; padding:15px 40px;" onclick="window.print()">üñ®Ô∏è IMPRIMIR / GENERAR PDF PARA MANTENIMIENTO</button>
        </div>
    </div>
</div>
 
<script>
    const epp_nfpa = {
        1: "<b>CATEGOR√çA 1 (M√≠n. 4 cal/cm¬≤):</b> Mameluco FR, careta para arco o capucha, antiparras, protecci√≥n auditiva, guantes de cuero pesados y calzado de seguridad.",
        2: "<b>CATEGOR√çA 2 (M√≠n. 8 cal/cm¬≤):</b> Mameluco FR, BALACLAVA (pasamonta√±as FR) + Careta para arco, protecci√≥n auditiva, guantes diel√©ctricos con protectores de cuero y calzado de seguridad.",
        4: "<b>CATEGOR√çA 4 (M√≠n. 40 cal/cm¬≤):</b> TRAJE COMPLETO (Arc Flash Suit) con capucha de 40 cal, guantes diel√©ctricos con protectores de cuero, doble protecci√≥n auditiva y calzado de seguridad.",
        99: "<b>‚ö†Ô∏è SWA - RIESGO EXTREMO:</b> Energ√≠a > 40 cal/cm¬≤. TRABAJO PROHIBIDO ENERGIZADO. Requiere desenergizaci√≥n total aguas arriba."
    };
 
    function verificarSWA() {
        const tarea = document.getElementById('tarea').value;
        document.getElementById('swa_alert').style.display = (tarea === 'intervencion') ? 'block' : 'none';
    }
 
    function generarEtiqueta() {
        const tag = document.getElementById('tag_input').value || "S/D";
        const kA = parseFloat(document.getElementById('ka_val').value);
        const t = parseFloat(document.getElementById('prot_t').value);
 
        if(!kA) return alert("Debe ingresar la corriente de cortocircuito (kA).");
 
        // C√°lculo IEEE 1584 simplificado
        const ene = (0.123 * (kA * 0.72) * t * 1.5);
        const dist = Math.sqrt(2.14 * kA * t);
        let cat_val = ene <= 1.2 ? 1 : (ene <= 8 ? 2 : (ene <= 40 ? 4 : 99));
 
        document.getElementById('result-display').style.display = 'block';
        document.getElementById('res_ene').innerText = ene.toFixed(2) + " cal/cm¬≤";
        document.getElementById('res_dist').innerText = dist.toFixed(2) + " m";
        document.getElementById('res_tag').innerText = tag;
        
        const catDisp = document.getElementById('res_cat');
        catDisp.innerText = cat_val === 99 ? "SWA" : "CAT " + cat_val;
        document.getElementById('epp_lista').innerHTML = epp_nfpa[cat_val];
 
        const header = document.getElementById('et_header');
        if (ene > 8) {
            header.innerText = "PELIGRO";
            header.className = "et-head danger";
            catDisp.style.color = "#cc0000";
        } else {
            header.innerText = "ADVERTENCIA";
            header.className = "et-head warning";
            catDisp.style.color = "#000";
        }
    }
</script>
</body>
</html>
